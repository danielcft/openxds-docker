<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><div><p><strong>OpenXDS Repository</strong></p><p>The Document Repository actor is responsible for the persistent storage of documents and for their registration with an appropriate XDS Document Registry. IHE required transactions involving the Repository include Provide and Register Document Set-b (ITI-41), Register Document Set-b (ITI-42) and Retrieve Document (ITI-43).</p><p>The high level OpenXDS Document Repository is depicted in the following Figure 1.</p><p>&nbsp;</p><p><img style="width: 960px; height: 720px" height="720" alt=" " src="/cn-project-pages/images/Repository.jpg" width="960" /></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Figure: 1&nbsp;OpenXDS Repository Architecture</p><p>&nbsp;</p><p>There are two sections in the above diagram divided by a&nbsp;number of&nbsp;arrows. The OpenXDS Repository is below the arrows, and above the arrows are external actors such as Access Control Engine, Document Source, Document Registry, Document Consumer and Audit Record Repository which interact directly with the OpenXDS Repository. Each arrow whose direction corresponds to its message request represents a transaction between the OpenXDS Repository and a particular actor. </p><p>The OpenXDS Repository supports the following transactions:</p><ul id="repcontents"><li>Access Control Query to an Access Control Engine (reserved for future)</li><li>Provide and Register Document Set-b from a Document Source (ITI-41)</li><li>Register Document Set-b to a Document Registry (ITI-42)</li><li>Retrieve Document Set by a Document Consumer (ITI-43)</li><li>Audit Trail Logging to an Audit Record Repository (ITI-20)</li></ul><p>The OpenXDS Repository is designed with three horizontal layers. On the top is a web service framework with security enforcement, followed by a message validation and repository business logics layer, and at the bottom is a pluggable Document Repository service layer.</p><p>The top layer contains two components, web services and security. The web services, provided by the Apache Axis2 web services engine, include both the server and client side implementation. As for security, there are Access Control, XUA and TLS sub-components. The Access Control is the client side subcomponent interacting with the Access Control engine, and XUA is employed to convey user tokens from the Document Source or&nbsp;Document Consumer. Both the Access Control and XUA sub-components are not available in OpenXDS 1.0. The TLS sub-component implements a part of the IHE ATNA profile and provides mutual secure node authentication.</p><p>The repository messaging layer in the middle leverages a modified messaging handling offered by the NIST Iheos project. It is composed of a validation layer validating the schema and metadata etc., as well as a business logic layer providing repository related functionality such as extracting the document content, computing hash size, adding entryUUID and invoking the Document Repository Service interface to insert, delete or retrieve documents.</p><p>The pluggable Document Repository Service layer including a Document Repository Service interface lies at the bottom. The repository service offers a repository extension which allows users to plug in a different implementation of the service interface. The default implementation is relational database based. A file system based repository however has also been implemented. It is also possible for developers to implement other types of repository such as the one based on an XML native database. Which type of repository to use will be the decision of the stakeholders of a community (or affinity domain) based on their requirements.</p><p>Besides the above horizontal layers, there are three vertical components, i.e., system log, audit trail log and actor configuration. The system log helps debug potential problems, while the audit trail log is a security measure specified by the ITI-20 transaction of the IHE ATNA profile. The actor configuration is used to configure the repository server and registry client connection details.</p><p>&nbsp;</p><p><strong>OpenXDS Registry</strong></p><p>The Document Registry actor is responsible for storing metadata information about these documents so that the documents of interest for the care of a patient may be easily found, selected and retrieved irrespective of the repository where they are actually stored. IHE required transactions for Document Registry include Register Document Set-b (ITI-42) and Registry Stored Query (ITI-18).</p><p>The high level OpenXDS Document Registry is depicted in the following Figure 2.</p><p>&nbsp;</p><p><img style="width: 960px; height: 720px" height="720" alt=" " src="/cn-project-pages/images/Registry.jpg" width="960" /></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Figure: 2&nbsp;OpenXDS Registry Architecture</p><p>&nbsp;</p><p>There are two sections in the above diagram divided by a&nbsp;number of&nbsp;arrows. The OpenXDS Registry is below the arrows, and above the arrows are external actors such as PIX Source, Access Control Engine, Document Repository, Document Consumer and Audit Record Repository which interact directly with the OpenXDS Registry. Each arrow whose direction corresponds to its message request represents a transaction between the OpenXDS Registry and a particular actor.</p><p>The OpenXDS Registry supports the following transactions:</p><ul id="regcontents"><li>PIX Feed an ADT message from a PIX Source (ITI-8) </li><li>Access Control Query to an Access Control Engine (reserved for future)</li><li>Register Document Set-b from a Document Repository (ITI-42)</li><li>Registry Stored Query from a Document Consumer (ITI-18)</li><li>Audit Trail Logging to an Audit Record Repository (ITI-20)</li></ul><p>The OpenXDS Registry has two vertical tracks, namely a patient registration track and a document track. </p><p>The patient registration track contains 3 layers: the top one establishes a MLLP socket and provides TLS secure node authentication; the middle one contains message validation and business logics to handle patient registration and patient query. At the bottom is a patient service layer containing an interface that can be implemented by a third party with a patient database. The default OpenXDS includes a light weight patient service that handles and stores only limited patient demographics.</p><p>The document track of the OpenXDS Registry is similar to the Repository as it also has a design of three horizontal layers. On the top is a web service framework with security enforcement, followed by a registry messaging layer including message validation and registry business logics, and at the bottom is a pluggable Document Registry services layer.</p><p>The top layer contains two components, web services and security. The web services, provided by the Apache Axis2 web services engine, include both the server and client side implementation. As for security, there are Access Control, XUA and TLS sub-components. The Access Control is the client side subcomponent interacting with the Access Control engine, and XUA is employed to convey user tokens from the Document Consumer. Both the Access Control and XUA sub-components are not available in OpenXDS 1.0. The TLS sub-component implements a part of the IHE ATNA profile and provides mutual secure node authentication.</p><p>The registry messaging layer in the middle leverages a modified messaging handling offered by the NIST Iheos project. It is composed of a validation layer which validates the schema, metadata and patient id etc., as well as a business logic layer providing registry related functionality.</p><p>At the bottom is a pluggable Document Registry Services layer containing two interfaces, namely, a Registry LifeCycle Service interface manipulating document life cycles and a Registry Query Service interface handling document queries. The default implementation of these two interfaces is an adapter that hooks up omar 3.1 registry available from freebXML.org. With the pluggable design, switching to a different registry implementation is made very easy.</p><p>Besides the above horizontal layers, there are three vertical components, i.e., system log, audit trail log and actor configuration. The system log helps debug potential problems, while the audit trail log is a security measure specified by the ITI-20 transaction of the IHE ATNA profile. The Actor configuration is used to configure the registry server connection details.</p></div>